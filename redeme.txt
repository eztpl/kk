kele系统说明书


		具体后台操作

	第一步建字段，先设想你可能要的字段名并做好规划

开始建立，点击建表系统，有两个管理菜单，分别是数据表管理和字段管理。

点击字段管理，最下方是建立子段的表单，表单各元素介绍：
1.中文--这个是对字段名的注释。2.字段名--表中存储数据的单位，

3.字段类型--数字，字符等这是下拉菜单，其值可修改，具体操作看下面的表单设置，
类型牵涉着存储数据时的数据处理，具体函数要参见代码文档。
4.字段大小--存储单元的大小。

5.字段显示类型--是指在界面调用数据时可分为列表页面和具体内容界面，
如选择“列表”在列表界面就可以调用，如选择“全部”则必须在具体内容界面显示。
查询数据时，会先查询有多少字段可显示。

6.字段存储类型--在接收从客户端传来的值的时候，“添加”代表正常存储数据。
“系统”则要另外处理，比如时间就是系统添加的数据。

7.搜索条件--这里条件是说sql中的where条件组合。

这个功能是对字段信息的数据管理，只有使用到那张表中时才会有作用。
对应的表，字段，表单都可修改，方便开发新功能，代码修改得参见代码文档了。

		第二步建表

点击数据表管理，最下方是建立表的表单，表单元素介绍：

1.表名--不自动加前缀。2.中文--表注释

3.是否主表--当一张表字段太多时，可分两张表存储，只要设置主表和附表关联就可以，
具体操作看下面主副表设置。这里关联主要是连表查询数据，可分一主表对一副表，
一主表对多副表，具体事例：用户表用的是一对一表，数据一对一条。表单表用的是一对一表，
数据一对多条。

4.功能类型--区分存储什么类型数据。

5.标记--关键的英文标识，用于连接流程中的各数据层，包括显示页面的参数view，表单标识
功能标识，存储数据表的标识。所以，表的标识要和其他几项相同，分别是：view，
表单的数据表标识，功能栏目的值。具体将在下面一一介绍

6.字段编号--选用建好的字段信息。

确定之后，数据被存储，同时，数据库中的表也被建立起来。
如果规划了两张表，请先执行第六步再执行下一步，所有的元素也同上可方便修改。

		第三步建表单

设置表单是对某一张表的数据存储做入口，点击设置表单进入设置界面，

注意：不要重复设置表单，这里没有判断那张表设置过表单。

这里的数据将存储到两张表，kele_memu（主表）和 kele_memufield（副表），
主表存储的是表单的大体信息，副表存储的是元素信息。

表单元素介绍：
1.表单名--中文注释。

2.表单标记--和数据表标记一样是表的标记值，默认不需修改。

3.字段值--默认，这个是字段名下面的字段名是中文注释。

4.字段名   5.元素类型--需要修改时，只需修改两处，1.在表单系统里可对建表单这项做修改
具体请操作一下，2.修改tpl\system\element.php文件，添加对应html代码。

5.默认值--默认显示在元素中的数据，本页面的最下面有相关说明:
默认值格式为 “显示值：存储值”每组用“|”隔开，“显示值：存储值|显示值：存储值|显示值：存储值” 
还可以使用sql语句格式为：“sql|select id as value,name from kele_table”；。

6.数据表标识 7.大小--文本框的长度，8.排序--显示元素的顺序。

9.前后台设置--元素是否在前台显示。选择“全部”前台可显示，选择“后台”则只有后台能显示。

表单修改只能在表和字段关键信息不改变的前台下才能有效。如果有表标记修改或字段添加删除，
则有两种方法修改，1.删除这条表单，2.用phpmyadmin直接修改两张表中的数据。

		第四步建功能栏目

功能栏目是对所有数据层的控制项，它主要是对前后台菜单设置，每个栏目的显示页面进行控制

表单元素介绍:
1.功能栏目名--菜单名或注释

2.链接地址--由功能函数+控制器+数据层组成。

3.上级编号--功能栏目的上下属。本站只采用两级菜单。

4.英文标记--贯穿流程的重要标识，由它查询该栏目的主表，再找到该表的表单或者找到该数据。

5.显示页面--如果为空将会查找show.php这是默认页面，否则查找show+值.php，
当上级编号是“-1”显示页面是 值.php。

使用功能栏目有两种情况：1.需要某个菜单，正常流程不需要设计界面，只有特殊栏目才需要设计页面
2.需要某个页面，比如首页，数据调用在页面上完成，则直接加载页面。

		第五步设置表和功能栏目的关联

为某个页面时不需要关联，关联的关键是标识，所以这里是设定某个栏目和那个表关联起来，但相对而言又是可以完全变换的，
没有绝对的关联在一起。


		第六步设置主副表关联

如果你规划了两张表存储一类信息的话，就必须将他们关联起来。

		第七步用户设置

1.用户类别是指用户所存在的领域，本系统有两个，一个后台，一个会员。

2.权限设置是用户组，它用来和权限，栏目进行关联的。

3.权限关联用户的各种操作除显示以外都必须设置关联项才能使用。

		第八步页面设计

本系统没有使用模板解析，直接使用php代码。文件名按照上述规则使用，内容调用有以下几重形式：

1.app\contro\function.php是默认处理控制器，显示数据的函数是show（标识），当标识有关联的表时，
默认查找这个栏目的数据，否则显示页面。show在需要分页功能时使用，不需要分页时用app\contro\database.php
中的get***数据库操作函数，这个函数直接获取表不通过标识。

2.获取表单函数memu（标识）3.数据加工app\model\data.php 获取session值getsession(数组)
截取字符串substrs(原字符串,截取长度)
文件操作app\model\filebase.php根据原图返回一个缩略图路径miniImg(原图路径,缩略宽度,缩略高度);

		第九步返回路劲

static\cache\url.php

'delete'=>array(
'default'=>'删除成功',
'default_url'=>'back',
),
规则：功能函数为下一个数组，以view为下标，提示信息为值，和view_url为下标,返回地址为值。
		

总结

这样一个新的功能被实现了，如果有一步出错请按顺序核实每个步骤。



